<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>objBattleFieldControlParent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
waves[1] = /*"5s0,5p0,5p0,5s0,5p0,5s0,5p0,5s0,5p0,5s0";*/"1s0,3s1,3p2,1s3,4s4";
waves[2] = "1s0,3s1,4p2,6s3,6p4";
waves[3] = "3s0,1h1,2h2,6s3";
waves[4] = "2s0,2h0,6p1,8s2";
waves[5] = "6s0,2h0,9p1,1t2";
waves[6] = "5s0,5h0,9p1,1t2";
waves[7] = "1t0,1t1"
waves[8] = "1t0,5s1,5h1,1t2,5h3,5p3";
waves[9] = "1s0,1h0,1s0,1h0,1s0,1h0,1s0,1h0,1s0,1h0,1s0,1h0,1s0,1h0,1t0";
waves[10] = "9s0,1p1,1h1,1p1,1h1,1p1,1h1,1p1,1h1,1p1,1h1,1p1,1h1,1p1,1h1,"
            +"1t2,1s3,1h3,1s3,1h3,1s3,1h3,1s3,1h3,1s3,1h3,1s3,1h3,1s3,1h3,1t3,1t4,1p5,1d6";
waves[11] = "1s0,1h0,1s0,1h0,1s0,1h0,1s0,1h0,1s0,1h0,1s0,1h0,1s0,1h0,"
            +"1p1,1h1,1p1,1h1,1p1,1h1,1p1,1h1,1p1,1h1,1p1,1h1,1p1,1h1,2s2,2h2,1t2";
waves[12] = "1b0,1s1,1b1,1s1,1b1,1s1,1b1";
waves[13] = "1h0,1s0,1b0,1h0,1s0,1b0,1h0,1s0,1b0,1t1,1s2,1b2,1t2,1h3,1s3,1b3,1h4,1s4,1b4,1t4,1h5,1s5,1b5,1t5";
waves[14] = "1t0,1t1,1b2,1h3,1s3,1b3,1h3,1s3,1b3,1h3,1s3,1b3,1d4";
waves[15] = "1h0,1s0,1b0,1h0,1s0,1b0,1h0,1s0,1b0,1t1,1s2,1b2,1n3";
waves[16] = "1n0,1h1,1s1,1b1,1h1,1s1,1b1,1h1,1s1,1b1,1n2,1b2,1h2,1s2,1b2";
waves[17] = "1n0,2n1";
waves[18] = "1t0,1n0,1h1,1s1,1b1,1h1,1s1,1b1,1h1,1s1,1b1,1h1,1s1,1b1,1h1,1s1,1b1,1t2,2n2";
waves[19] = "1n0,2n1,2n2,3n3";
waves[20] = "1h0,1s0,1b0,1n0,1h0,1s0,1b0,1n0,1h0,1s0,1b0,1n0,1n1,1n2,1i3";
waves[21] = "1b0,1h0,1b0,1s0,1b0,1p0,1b0";
waves[22] = "1g0,1s1,1g1,1h1,1b1,8g2";
waves[23] = "1t0,1g1,1g2";
waves[24] = "1h0,1s0,1b0,1g0,1n0";
waves[25] = "1d0,1d1";
waves[26] = "1s0,1g0,1h0,1b0,1s0,1g0,1h0,1b0,1s0,1g0,1h0,1b0,1n1,1d2";
waves[27] = "1s0,1g0,1h0,1b0,1s0,1g0,1h0,1b0,1s0,1g0,1h0,1b0,1t0,1g1,2g2";
waves[28] = "2n0,1h1,1g1,1h1,1g1,1h1,1g1,1h2,1g2,1h2,1g2,1h2,1g2,2d3";
waves[29] = "1d0,1i1";
waves[30] = "2d0,1s0,1g0,1h0,1b0,1s0,1g0,1h0,1b0,1s0,1g0,1h0,1b0,"
            +"1s1,1g1,1h1,1b1,1s1,1g1,1h1,1b1,1s1,1g1,1h1,1b1,"
            +"1t2,1s2,1g2,1h2,1b2,1s2,1g2,1h2,1b2,2n3,1t3,1s3,1g3,1h3,1b3,"
            +"2g4,1z5";
waves[31] = "1s0,1g0,1h0,1b0,1s0,1g0,1h0,1b0,1s0,1g0,1h0,1b0,"
            +"1s1,1g1,1h1,1b1,1s1,1g1,1h1,1b1,1s1,1g1,1h1,1b1,"
            +"1t2,1s2,1g2,1h2,1b2,1s2,1g2,1h2,1b2,2n3,1t3,1s3,1g3,1h3,1b3,";
waves[100] = //"1d0,9s3"
            "3p0,3s0,3h0,4b0,2t1,1d2,2i3,4n4,1z5";
currentWave = 0;
numWaves = 0;

minFPS = 10000;

coin = instance_create(x,y,objDisplayCoin);
carnageState = false;
carnage = noone;
carnageList[0] = noone;
carnageCount = 0;
carnageTimer = 0;
carnageGold = 0;
carnagePointer = 0;
carnageInterval = 15;
displayx = 0;
displayy = 0;
accCheck = -1;


//Set Palette Indices 
var chap1 = ((day - 1) div 10) mod 3;
var chap2 = (((day - 1) div 10)-1) mod 3;
var chap3 = (((day - 1) div 10)-2) mod 3;
footPalIndex = chap1;
trollPalIndex = chap1;
magePalIndex = chap1;
dragonPalIndex = chap1;
snowManPalIndex = chap2;
icePalIndex = chap2;
zeusPalIndex = chap3;


//Create ObjEnemyWave for each entry in waves[day]
var numEntries = round(string_length(waves[day])/4);

for(i = 0; i &lt;= numEntries; i++)
{
    scrCreateEnemyWave(waves[day],1 + i*4);
}

//scrSpawnEnemies(1);
for(i = 0; i&lt;numWaves;i++)
{
    alarm[i] = waveDelay*i + 1;
}

///Music
if(day &gt;= 15)
{
    if(!sound_isplaying(sndSnowSong))
    {
        audio_stop_sound(sndBattlefieldSong);
        audio_stop_sound(sndShopSong);
        audio_play_sound(sndSnowSong,0,true);
    }
    background_index[0] = bgSnowy;
}
else
{
    audio_stop_sound(sndSnowSong);
    audio_stop_sound(sndShopSong);
    audio_play_sound(sndBattlefieldSong,0,true);
    
    background_index[0] = bgGrassy;
}


/*else if(!sound_isplaying(sndBattlefieldSong))
{
    audio_play_sound(sndBattlefieldSong,0,true);
}*/
//audio_play_sound(sndBattlefieldSong,0,true);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//audio_stop_sound(sndBattlefieldSong);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrAccumulateGold(carnageList[carnagePointer])
carnagePointer++;
if(carnagePointer &lt; carnageCount)
{
    alarm[11] = carnageInterval;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(9);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(8);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(7);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(6);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(5);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(4);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(3);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(2);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(1);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSpawnEnemies(0);
currentWave++;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(debug_mode)
{
    if(fps_real &gt;= 0)
    {
        minFPS = min(minFPS,fps_real);
    }
}

escape = keyboard_check_pressed(vk_escape);
q = keyboard_check_pressed(ord('Q'));
w = keyboard_check_pressed(ord('W'));
e = keyboard_check_pressed(ord('E'));
r = keyboard_check_pressed(ord('R'));

if(!instance_exists(objEnemyParent) &amp;&amp; !carnageState)
{
    if(currentWave == numWaves)
    {
        //day++;
        //scrSaveGame();
        carnageState = true;
        carnageInterval = max(1,min(180/carnageCount,15));
        alarm[11] = carnageInterval;
        with(objBow)
        {
            carnageState = true;
        }
        //room_goto(rmUpgrade);
    }
    for(i = 0; i &lt; numWaves-currentWave; i++)
    {
        alarm[currentWave+i] = i*waveDelay + 1;
    }
}

if(carnageState)
{
    if(!instance_exists(carnage))
    {
        carnage = instance_create(view_wview[0]/2,view_hview[0]/2,objCarnage);
    }
}

if(escape)
{
    //game_end();
    //if(carnageState)
    //{
    //    room_goto(rmUpgrade);
    //}
    //else
    //{
        instance_create(view_wview[0]/2,view_hview[0]/2,objPause);
    //}
}

if(mouse_wheel_up())
{
    scrGetScrollUpArrow();
}
else if(mouse_wheel_down())
{
    scrGetScrollDownArrow();
}

if(q)
{
    currentArrow = objArrow;
}
if(w &amp;&amp; fireUpgrade)
{
    currentArrow = objFireArrow;
}
if(e &amp;&amp; frostUpgrade)
{
    currentArrow = objIceArrow;
}
if(r &amp;&amp; lightningUpgrade)
{
    currentArrow = objLightningArrow;
}


gameSteps++;



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(carnageState)
{
    day++;
    scrSaveGame();
}
//audio_stop_sound(sndBattlefieldSong);

audio_stop_sound(sndSnowSong);
audio_stop_sound(sndBattlefieldSong);
audio_play_sound(sndShopSong,0,true);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrSaveGame();
oldGold = gold;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(debug_mode)
{
    draw_set_halign(fa_left);
    scrDrawTextOutline("FPS = " + string(fps_real),32,32, c_white,c_black);
    scrDrawTextOutline("#Min FPS = " + string(minFPS),32,32, c_white,c_black);
    scrDrawTextOutline("##CarnageCount= " + string(carnageCount),32,32, c_white,c_black);
    //scrDrawTextOutline("##carnageState?: " + string(carnageState),32,32, c_white,c_black);
    //scrDrawTextOutline("####objCarnage?: " + string(instance_exists(objCarnage)),32,32, c_white,c_black);
    //scrDrawTextOutline("####mainMenuButton?: " + string(instance_exists(objMainMenuButton)),32,32, c_white,c_black);
    var i = 0;
    var j = 0;
    var arrayString = "";
    while(i &lt; carnageCount)
    {
        for(j = 0; j&lt;i; j++)
        {
            arrayString += "#";
        }
        arrayString += carnageList[i];
        scrDrawTextOutline("###" + arrayString,32,32, c_white,c_black);
        i++;
        arrayString = "";
    }
    
}



draw_set_font(fntDamageUpgrade);
draw_set_halign(fa_left);
//Day
scrDrawTextOutline("Day:" + string(day),view_xview[0]+32,32,c_white,c_black);
//Gold
//scrDrawTextOutline("Gold: ",view_wview[0]/2 - sprite_get_width(sprInfoTextBox)/2 + 10,32,c_yellow,c_black);
draw_set_halign(fa_right);
scrDrawTextOutline(string(gold),view_wview[0]/2 + sprite_get_width(sprInfoTextBox)/2 - 10,32,c_yellow,c_black);
if(instance_exists(coin))
{
    coin.x = view_wview[0]/2 + sprite_get_width(sprInfoTextBox)/2 - 20 - coin.sprite_width/2 - string_width(string(gold));
    coin.y = 46;
    coin.visible = true;
}
//Wave
draw_set_halign(fa_right);
scrDrawTextOutline("Wave: " + string(currentWave) + "/" + string(numWaves),view_wview[0] - 32,32,c_white,c_black);
draw_set_halign(fa_left);

///////////CARNAGE REPORT////////////////
if(carnageState)
{
    /*if(accCheck != carnageTimer div 15)
    {
        
    }
    accCheck = carnageTimer div 15;*/
    if(carnageTimer div carnageInterval &lt; carnageCount)
    {
        carnageTimer++;
    }
    if(instance_exists(objCarnageReport))
    {
        draw_set_halign(fa_center);
        scrDrawTextOutline("Level Complete!", objCarnageReport.x, objCarnageReport.y - objCarnageReport.sprite_height/2 + 20, c_white, c_black)
        
        draw_set_halign(fa_left);
        scrDrawTextOutline("Enemies Defeated: ", objCarnageReport.x - objCarnageReport.sprite_width/2 + 40, objCarnageReport.y - objCarnageReport.sprite_height/4 + 20, c_white, c_black)
        
        scrDrawTextOutline("Gold Earned: ", objCarnageReport.x - objCarnageReport.sprite_width/2 + 40, objCarnageReport.y + objCarnageReport.sprite_height/4 + 20, c_yellow, c_black)
        scrDrawTextOutline(string(carnageGold), objCarnageReport.x - objCarnageReport.sprite_width/2 + 40 + string_width("Gold Earned: ") + sprite_get_width(sprBigCoin), objCarnageReport.y + objCarnageReport.sprite_height/4 + 20, c_yellow, c_black)
        
        scrDisplayCarnage();
    }
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
